const urlParams=new URLSearchParams(window.location.search);const path=urlParams.get("path")||"/music";fetch(`https://alist.butlanys.de/api/fs/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:path,password:"",page:1,per_page:100,refresh:false})}).then(e=>e.json()).then(e=>{if(e.code===200){const a=e.data.content.filter(e=>!e.is_dir).map(e=>({name:e.name.replace(/\.[^/.]+$/,""),url:`https://alist.butlanys.de/d/onedrive-data${path}/${encodeURIComponent(e.name)}`,cover:e.thumb}));const t=new APlayer({container:document.getElementById("aplayer"),fixed:true,autoplay:false,order:"random",audio:a})}else{console.error("获取音乐列表失败:",e.message)}}).catch(e=>{console.error("获取音乐列表出错:",e)});