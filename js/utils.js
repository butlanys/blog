(()=>{const e={debounce:(n,i=0,a=false)=>{let s;return(...e)=>{const t=()=>{s=null;if(!a)n(...e)};const o=a&&!s;clearTimeout(s);s=setTimeout(t,i);if(o)n(...e)}},throttle:function(n,i,a={}){let s,l,r;let d=0;const c=()=>{d=a.leading===false?0:(new Date).getTime();s=null;n.apply(l,r);if(!s)l=r=null};const e=(...e)=>{const t=(new Date).getTime();if(!d&&a.leading===false)d=t;const o=i-(t-d);l=this;r=e;if(o<=0||o>i){if(s){clearTimeout(s);s=null}d=t;n.apply(l,r);if(!s)l=r=null}else if(!s&&a.trailing!==false){s=setTimeout(c,o)}};return e},overflowPaddingR:{add:()=>{const e=window.innerWidth-document.body.clientWidth;if(e>0){document.body.style.paddingRight=`${e}px`;document.body.style.overflow="hidden";const t=document.querySelector("#page-header.nav-fixed #menus");if(t){t.style.paddingRight=`${e}px`}}},remove:()=>{document.body.style.paddingRight="";document.body.style.overflow="";const e=document.querySelector("#page-header.nav-fixed #menus");if(e){e.style.paddingRight=""}}},snackbarShow:(e,t=false,o=2e3)=>{const{position:n,bgLight:i,bgDark:a}=GLOBAL_CONFIG.Snackbar;const s=document.documentElement.getAttribute("data-theme")==="light"?i:a;Snackbar.show({text:e,backgroundColor:s,showAction:t,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=false)=>{const o=new Date;const n=new Date(e);const i=o-n;const a=i/1e3;const s=a/60;const l=s/60;const r=l/24;const d=r/30;const{dateSuffix:c}=GLOBAL_CONFIG;if(!t)return Math.floor(r);if(d>12)return n.toISOString().slice(0,10);if(d>=1)return`${Math.floor(d)} ${c.month}`;if(r>=1)return`${Math.floor(r)} ${c.day}`;if(l>=1)return`${Math.floor(l)} ${c.hour}`;if(s>=1)return`${Math.floor(s)} ${c.min}`;return c.just},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver(e=>{if(e[0].isIntersecting){t();o.disconnect()}},{threshold:[0]});o.observe(e)}else{t()}},scrollToDest:(n,i=500)=>{const a=window.scrollY;const e=document.getElementById("page-header").classList.contains("fixed");if(a>n||e)n=n-70;if("scrollBehavior"in document.documentElement.style){window.scrollTo({top:n,behavior:"smooth"});return}const s=performance.now();const l=e=>{const t=e-s;const o=Math.min(t/i,1);window.scrollTo(0,a+(n-a)*o);if(o<1){requestAnimationFrame(l)}};requestAnimationFrame(l)},animateIn:(e,t)=>{e.style.display="block";e.style.animation=t},animateOut:(e,t)=>{const o=()=>{e.style.display="";e.style.animation="";e.removeEventListener("animationend",o)};e.addEventListener("animationend",o);e.style.animation=t},wrap:(e,t,o)=>{const n=document.createElement(t);for(const[i,a]of Object.entries(o)){n.setAttribute(i,a)}e.parentNode.insertBefore(n,e);n.appendChild(e)},isHidden:e=>e.offsetHeight===0&&e.offsetWidth===0,getEleTop:e=>{let t=e.offsetTop;let o=e.offsetParent;while(o!==null){t+=o.offsetTop;o=o.offsetParent}return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if(t==="medium_zoom"){mediumZoom(e,{background:"var(--zoom-bg)"});return}if(t==="fancybox"){Array.from(e).forEach(e=>{if(e.parentNode.tagName!=="A"){const t=e.dataset.lazySrc||e.src;const o=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}});if(!window.fancyboxRun){let e="";if(Fancybox.version<"6"){e={Hash:false,Thumbs:{showOnStart:false},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}}else{e={Hash:false,Carousel:{transition:"slide",Thumbs:{showOnStart:false},Toolbar:{display:{left:["counter"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:["autoplay","thumbs","close"]}},Zoomable:{Panzoom:{maxScale:4}}}}}Fancybox.bind("[data-fancybox]",e);window.fancyboxRun=true}}},setLoading:{add:e=>{const t=`
        <div class="loading-container">
          <div class="loading-item">
            <div></div><div></div><div></div><div></div><div></div>
          </div>
        </div>
      `;e.insertAdjacentHTML("afterend",t)},remove:e=>{e.nextElementSibling.remove()}},updateAnchor:e=>{if(e!==window.location.hash){if(!e)e=location.pathname;const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(()=>{let n,i,a,s;return(e,t)=>{if(!n||t.clientHeight!==n){n=t.clientHeight;i=window.innerHeight;a=t.offsetTop;s=Math.max(n-i,document.documentElement.scrollHeight-i)}const o=(e-a)/s;return Math.max(0,Math.min(100,Math.round(o*100)))}})(),addEventListenerPjax:(e,t,o,n=false)=>{e.addEventListener(t,o,n);btf.addGlobalFn("pjaxSendOnce",()=>{e.removeEventListener(t,o,n)})},removeGlobalFnEvent:(e,t=window)=>{const o=t.globalFn||{};const n=o[e];if(!n)return;Object.keys(n).forEach(e=>n[e]());delete o[e]},switchComments:(e=document,t)=>{const o=e.querySelector("#switch-btn");if(!o)return;let n=false;const i=e.querySelector("#post-comment");const a=()=>{i.classList.toggle("move");if(!n&&typeof loadOtherComment==="function"){n=true;loadOtherComment(e,t)}};btf.addEventListenerPjax(o,"click",a)}};window.btf={...window.btf,...e}})();